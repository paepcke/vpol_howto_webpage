<!DOCTYPE html>
<html>
  <head>
  <title>Datastage Data Access How-To</title>
    <style>
      body
      {
      background-color:#b0c4de;
      }
      #spanhand
      {
      font-style: bold;
      font-size: 150%;
      display: inline-block;
      }

    </style>

    <script LANGUAGE="JavaScript">
    <!-- Hiding JavaScript>

    function showEmailAddr()
    {
      var theName = "Paepcke";
      var theAt = "@";
      var theDomain = "CS.Stanford.edu";
      var theMailTo = "<A HREF='mailto:" + theName + theAt + theDomain + "'>";
      var theMailToClose = "</A>";

      document.write(theMailTo + theName + theAt + theDomain + theMailToClose);
    }// End hiding JavaScript -->
    </script>

  </head>

  <body>

<center><h1>How to Access the VPOL Online Learning Data</h1></center>

<ul>
<!-- ****** <li><a href="http://mono.stanford.edu:8000">AnswerServer</a></li> -->
  <li><a href="#accessProcedure">Protocol for Access</a></li>
  <li><a href="#dataSummary"><span id="spanhand">Summary of Available Data</a></span></a>&#8592;Good section to check out</li>
  <li><a href="#dbConn">Preparing your machine for connecting to
      databases</a></li>
  <li><a href="#excel">Connecting from Excel</a></li>
  <li><a href="#spss">Connecting from SPSS</a></li>
  <li><a href="#razorSQL">Connecting from RazorSQL or Froq</a></li>
  <li><a href="#pickUp">Picking up data and visualizations prepared
  by staff or friends</a></li>
  <li><a href="#appA">List of available data sets</a></li>
  <li><a href="#appB"><span id="spanhand">Explanation of OpenEdx data fields</span></a>&#8592;Good section to check out</li>
  <li><a href="#appC">How to build an ssh tunnel</a></li>
  <li><a href="https://docs.google.com/document/d/1WlWkaFkpzt9i3zGVqGYAnxK_wdklUncOnh4A0T5yeJs/edit?pli=1">Example queries</a></li>
  <li><a href="http://www.tableausoftware.com/public/gallery">Gallery
  of example data visualizations</a></li>
</ul>


The Vice Provost Office for Online Learning facilitates the teaching
of online classes. The instruction delivery platforms are instrumented
to collect a variety of data around participants' interaction with the
study material. Examples are participants manipulating video players as
they view portions of a class, solution submissions to problem sets,
uses of the online forum available for some classes, peer grading
activities, and some demographic data. The type of data that is
collected depends on the delivery platform used for a particular
class.
<p>
VPOL makes some of this data available for research on learning
processes, and for explorations into improving instruction.
<p>
All data that VPOL shares is available on machine
<i>datastage.stanford.edu</i>. You have multiple methods of using this data:
We provide self service answers to frequent questions, customizable to
your context. Data viewing programs for MAC and Windows allow you to
browse through our content. Going further, most analysis tools, like
R, SPSS, and Excel can connect directly to our databases. Similarly,
visualization tools are available that allow you to create static, or
interactive charts of data directly from our sources. We explain these
access methods here, or point to relevant instructions on the Web.
<p>
Additionally, we run
a <a href="http://www.tableausoftware.com/products/server">Tableau Server</a>
to which you can publish visualizations you create with the Tableau
Desktop visualization tool. Visitors can manipulate these
visualizations to the degree you provide for. A comment area is
available for each view to discuss the information. If desired, access
to the views can be limited. Again, more in this document.

We now run through the available access paths to the data, ordered in
increasing power (and sometimes associated complexity).

<h2 id="accessProcedure">Protocols for Access</h2>

Even though we do not keep highly sensitive information on this
server, we do need to protect the data to some degree from malicious
intrusion. If you are interested in studying the data, please fill out
<a href="http://vpol.stanford.edu/research">our request form</a>.
<p>
While the form accommodates requests for data with personally
identifiable information, we can only provide such access in special
cases. The data from which personalized information has been removed
is quite rich. Please at least try to work with that data until you
have a firm research plan in mind.
<p>
If you are the instructor of a class, and you need the data to improve
future runs of your course, the personally identifiable data is more
freely available than if the data is used for research.
<p>
Please take the online non-medical human subjects research certification
class
(<a href="https://humansubjects.stanford.edu/new/resources/training/citi.html">
    through Stanford</a>
or <a href="https://www.citiprogram.org/">through CITI</a>, or some
other
institution). Then <a href="mailto:upload.IRBcert.ucf1bw6ifx@u.box.com">email
    your resulting PDF file.</a> 

<h2 id="dataSummary">Summary of Available Data</h2>
Datastage holds learning research data derived from courses offered on
three platforms: NovoEd, Coursera, and OpenEdX.  Documentation on
Coursera export formats are
described <a href="https://spark-public.s3.amazonaws.com/mooc/data_exports.pdf">
in a separate document</a>. For NovoEd format documentation you need
to browse their tables. Here is a summary of data that is available
for Stanford courses taught on OpenEdX. For more in-depth information
see <a href="#appA">Appendix A</a>.
</p>
Data include both raw numbers that the OpenEdX platform collects, and
tables that result from computations over that base data.
<p>
<b>Note: </b><i>tracking log</i> data that the platform collects is
known to be incomplete. Tracking logs list small actions that
participants undertake when interacting with a course through their
browser. Examples are video playback controls, and assignment
submissions. The platform instrumentation misses an unknown number of
these events. The EdX consortium is working on this issue. Meanwhile,
consider data based on tracking logs a conservative
estimate. Reportedly, Coursera tracking logs experience similar
missing data.
</p>
<h3>Stored tables</h3>
<ul>
 <li> <b>ActivityGrade</b>: Assignment grades; includes right/wrong for each
   problem part, the learners' solution choice for each answer pard,
   and the first and last solution submission times. Constructed from platform table
   courseware_studentmodule.</li>

 <li> <b>Performance</b>: Daily cumulative assignment performance per
   learner. This is the average grade over all assignments up to the
   day before the query. A view onto ActivityGrade. </li>

 <li> <b>FinalGrade</b>: 'Raw' final grades. Raw in that they do not
   take into account instructor defined weightings. This is an
   anonymized view onto the private table UserGrade (see
   below). FinalGrade differs from the Performance table in that it
   reflects the platform's current grade. That grade might reflect
   work other than the assignments that are captured in the
   ActivityGrade table.</li>
   
 <li> <b>UserCountry</b>: country of origin by IP address. Each row is a tuple
   consisting of one anonymous user id, the two-letter country code,
   the three-letter country code, and the spelled-out country. If a
   participant accesses the platform from different IP addresses,
   each IP address has its own row in the table. Multiple accesses
   from the same IP generate just one row.</li>

 <li> <b>EdxForum.contents</b>: Forum entries since about June
   2013. The entries are in relational form. Three versions can be
   generated: without anonymization, anonymized with hashed user ids
   different from the hashes used in other tables, and anonymized
   using the same hashes.</li>

 <li> <b>VideoInteraction</b>: an excerpt from tracking logs, focusing on
   participants' interactions with video.</li>

 <li> <b>EventXtract</b>: A much slimmed view of the OpenEdX tracking log
   events. The view only includes fields that are currently in use by
   the platform. </li>
</ul>
   
<h3>Computed tables</h3>

<ul>
 <li> <b>Time-on-task</b>: estimate for how long participants worked online on
   their courses. Computed from tracking log events, and partitioned
   into 30 minute sessions. Available: every session for every participant
   and course, weekly aggregates of the sessions, and course level
   aggregates. Session length for the computations can be customized
   on request, but this is a manual process. Part of the canned table
   exports, because this table is computed on demand, not stored (see
   next section)</li>

</ul>

<h3>Canned exports</h3>

<ul>
 <li> The tracking log data, video interactions, activity grade, and
   time-on-task tables can be exported per course, and picked up over
   the Web. Plan is to add the forum table to this set.</li>

 <li> Other interactions with the tables require access to our server,
   and knowledge of SQL.</li>
</ul>

<h3>Somewhat Sensitive Data</h3>

Some data is held in a private section of server; available by
application with demonstrated need:

<ul>
 <li> UserGrade: Raw grades as recorded by the platform. An amalgam of
   auth_user and certificates_generatedcertificate.</li>

 <li> A number of <a href="#mirrors">tables are mirrored</a> from the Stanford OpenEdX platform.
 </li>
 
   Can be extended to more. Updated nightly, except weekends.
</ul>

<!-- <h2>If We Anticipated your Question</h2> -->

<!-- In the simplest case your question has been asked and answered before, -->
<!-- albeit for a different context. Such a context might be a particular -->
<!-- class for which the question was originally asked, or a particular -->
<!-- problem set. For cases like this -->
<!-- our <a href="http://mono.stanford.edu:8000">AnswerServer</a> will -->
<!-- eventually help. It is <b>under construction</b>. This server differs -->
<!-- from a typical FAQ list in that you are able to adjust the question to -->
<!-- your context. We will be growing the coverage of that page as we go -->
<!-- along. If you have an idea for a useful one-liner question, please -->
<!-- send email to <script LANGUAGE="JavaScript">showEmailAddr()</script>. -->

<h2>Browsing and Querying the Data</h2>

A number of applications are available for browsing data stored in
MySQL databases, the type in which VPOL data resides.  Some
applications
are <a href="http://sixrevisions.com/tools/applications_mysql_databases/">discussed</a>
on the
Web. <a href="http://download.cnet.com/Froq/3000-2065_4-189145.html">Froq</a>
and <a href="http://www.sequelpro.com/">SequelPro</a> are available
for the Mac. One cross platform tool
is <a href="http://razorsql.com/">RazorSQL</a>. It works on Mac,
Linux, and Windows. All these tools list available tables, allow some
browsing over the tables, and allow one to enter queries whose results
appear in the interface. Connecting RazorSQL is explained below; the
other tools work through similar procedures.

<h3 id="razorSQL">RazorSQL</h3>

The application <i>RazorSQL</i>, which works under Mac, Windows, and
Linux, can create either a tunneled or a direct connection to
MySQL. For details on the difference, please
see <a href="#appB">Appendix B</a>. You begin the connection process
by choosing:

<i>File-->New Tab (no connection)</i>

In the subsequent screen, you click on <i>Click to connect to a
database</i>:

</p><center><img src="figs/razorConnectStep1Web.png"/></center></p>

...resulting in:

</p><center><img src="figs/razorConnectStep2Web.png"/></center></p>

This screen allows you to select among different connections you have
already defined. Not having defined any, you click <i>Add Profile</i>,
and pick <i>MySQL</i> from the resulting list of database types that
the application knows about.

</p><center><img src="figs/razorConnectStep3Web.png"/></center></p>

Here is where you fill in the particulars. Leave all pre-filled fields
alone. For <i>Profile name</i> you pick any name that reminds you
later of what this connection is about.

<i>Login</i> and <i>Password</i> are the information you received with
your access material. For <i>Host or IP Address</i> you fill in
datastage.stanford.edu. The <i>Port</i> is left
blank. In the <i>Database</i> field you enter one of the databases of
<a href="#appA">Appendix A</a>. Click <i>Connect</i>, and you
(hopefully) see a screen other than one informing you of failure.

At this point, you can continue via the RazorSQL manual and help
pages. 

<h2>Analysis Tools</h2>

Most researchers use one of the graphical user interface that were
mentioned above to browse through the data, and to issue queries. They
then save results into a comma separated values (CSV) file. Analysis
tools like SPSS can read that data. This approach is likely the least
complicated.
<p>
However, Excel, R, and SPSS are among the tools that can access data
in MySQL servers directly. After some setup, the data appears in your
table. After that setup, you are in your home territory of the tool
you are used to. This section explains how to accomplish this data
import.

<h3 id="dbConn">The All-Important Database Connector</h3>

For all these connections, you will need a 'database connector,'
sometimes called an 'ODBC driver.' These drivers are set up just once
in your machine---Mac or Windows. To grab one of them, head over to
the <a href="http://dev.mysql.com/downloads/connector/odbc/">MySQL
connector download page</a>, and download the version for your
operating system (Windows or Mac). Note that even though your computer
might be of the '64 bit' type (whatever that means), you are likely to
need the 32-bit version of the database connector! This choice is
definitely the right one for Macs; for Windows it is the most likely
choice 
(see <a href="http://office.microsoft.com/en-us/excel-help/choose-the-32-bit-or-64-bit-version-of-office-HA010369476.aspx">why</a>).

You start the downloaded program as you usually do on your
computer. Here is information you will need for the mostly-open data: 

<b>Server:</b> <i>datastage.stanford.edu</i><br>
<b>User:</b> [your username]</br>
<b>Password:</b> [your password]</br>
<b>Database:</b> [see appendix A for the list of available databases]</br>

Once you installed the connector, you will find it popping up in all
the right places among the menu options that are referred to in the
following sections.

<h3 id="excel">Connecting Excel</h3>

See <a href=http://helpdeskgeek.com/office-tips/excel-to-mysql/>this reference</a>
for how to fill your spreadsheet with a particular dataset. The result
will look like this: 
</p><center><img src="figs/excelToEdxScreenshotWeb.png"/></center></p>

For the phase in the above referenced instructions that looks like
this:
</p><center><img src="figs/excelDatasourceConfigScreenshotWeb.png"/></center></p>

... the information you enter will depend on whether you will be
accessing more restricted information, or the mostly open data.

<b>Open data</b>:
</b>Data source name: <enter a name that will have you recognize the
			 connection></br>
<b>Description:</b> [a reminder for yourself]</br>
<b>Server:</b> datastage.stanford.edu</br>
<b>Port:</b> 3306</br>
<b>User:</b> [your user name]</br>
<b>Password:</b> [your password]</br>
<b>Database:</b> [the name of the database of
	       interest. See <a href="#appA">Appendix A</a>].</br>

<h3 id="spss">Connecting SPSS</h3>

Here is how you connect an SPSS sheet to one of the VPOL data
sources. Remember first to <href src="#dbConn">install your database connector</a>.

In SPSS:</br>

<i>File-->Open Database-->New Query</i></br>

Assuming you have set your connector to point to database <i>Edx</i>,
and that you named it <i>MonoEdx</i> (for whatever fanciful reason),
you will then see this:

</p><center><img src="figs/spssToEdxStep0Web.png"/></center></p>

Choose whichever real name you gave your connector, and
click <i>next</i>. You now get to choose the fields that you want to
extract from the database:

</p><center><img src="figs/spssToEdxStep1Web.png"/></center></p>

SPSS has figured out which tables are available in this database, and
you can start moving fields over to the right. Once you again clicked
on <i>next</i>, you will have an opportunity to introduce conditions
on which rows you would like to import:

</p><center><img src="figs/spssToEdxStep2Web.png"/></center>

I am still a bit puzzled by the interface of this screen. If you get
stuck, we can try to figure it out. If all goes well, you will now see
something like this:

</p><center><img src="figs/spssToEdxScreenshotWeb.png"/></center></p>

<h2 id="pickUp">Picking up data and visualizations prepared by staff
  or friends</h2>

Sometimes staff or friends might prepare either data extracts or
visualizations for you. If they park this information on
infoviz.stanford.edu, they will give you the name of a 'workbook' on
that server. To see the visualizations, and/or to grab the underlying
data as .csv files follow these instructions:

<ol>
  <li>Go to <i>infoviz.stanford.edu</i></li>
  <li>Log in as vpol/vpol</li>
  <li>Click on <i>Workbooks</i></li>
  <li>Find your workbook, and click on it</li>
</ol>

<center><img src="figs/tableauServerWorkbookScreenshotWeb.png"/></center>


You should then see some number of charts that are part of the
material for you. Open one of these <i>views</i>. Hover over marks to
see tooltips. To see the data that is involved in a view, click the
leftmost of the icons above the view.  

Its tooltip says <i>Export</i>. You'll get a new window with two tabs:
the one you'll be on will be just the data that went into the
particular view you were on when you clicked export.

If you want to grab all the data, choose the
tab <i>Underlying</i>. You'll see the first 200 rows. Note that you
might see some data in this fully populated table that you don't see
in the visualizations: some rows might be filtered out in the
views. You will need to do the same if appropriate to your further
plans. 

<center><img src="figs/tableauServerExportScreenshotWeb.png"/></center>

Finally, to download, click the link <i>Download all rows as a text
file</i>


<h2 id="appA">Appendix A: List of Available Databases</h2>

<h3>Courses on Platforms OpenEdX Operated at Stanford</h3>

Data from Stanford courses offered via the OpenEdx platform software
by Stanford includes the above mentioned <i>events</i>, which document
how participants interacted with the platform. Forum posts are
available as well. All data has personally identifiable information
removed. For <a href="#appB">details of each table</a>, see below.


<h3>Courses on Platforms Coursera and NovoEd</h3>
For a list of Coursera courses as of May 18, 2014, see the
<a href="datastageDbsMay18_2014.html#coursera">Coursera list</a>.
For NovoEd, see
the <a href="datastageDbsMay18_2014.html#novoed">NovoEd list</a>. 
<p>
Coursera <a href="https://spark-public.s3.amazonaws.com/mooc/20130414_data_exports.pdf">export
  format information</a> is a useful resource. However, the data is
only available via the <a href="#accessProcedure">access
  procedure</a>. 


<h2 id="appB">Appendix B: Explanation of OpenEdx data fields</h2>

The Edx and EdxPrivate databases provide a lossless translation from
the OpenEdx platform tracking logs to relational tables. The
translation was constructed based on tracking logs of Stanford's
OpenEdx classes.
<p>
Each entry in a tracking log contains information about one small
interaction that one participant undertook with the learning
platform. Examples are the submission of a problem solution, a video
control action, like starting a video, or the initial creation of an
account. <b>Note:</b>the event collection process of the OpenEdX
platform is not perfect yet. Events do get lost on the way. The EdX
consortium is working on this issue. But meanwhile you need to
consider computations based on track logs as lower bounds.
<p>
<b>Beware 9c1185a5c5e9fc54612808977ee8f548b2258d31</b>: One event
track failure is that some screen names show up as empty strings. When
we anonymize these empty screen names, they all come to look like the
same anonymized person, the above ugly string. When we export tables
for you, we filter these duds out. But if you work on the database
tables themselves, you need to take of it yourself.
<p>
The logs were designed to hold every piece of information that might
need to be captured now or in the future. Not all of the log fields
are currently in use. Of the many columns in the relational tables
only some therefore need to be considered at this point. We therefore
created some tables that allow you to focus.
<p>
<ul>
  <li>EventXtract</li>
  <li>VideoInteraction and</li>
  <li>ActivityGrade</li>
</ul>
We call these the <i>basic</i> tables.  During export we partition the
tables into groups that correspond to the analysis purposes for which
they are intended. The <b>Basic Tables</b> are meant for everyday
use. Those tables exist in the database on Datastage, and we can
export extracts of the three tables for individual classes as well.
<p>
Export table group <b>Engagement</b> are tables that approximate how
much time course participants spent interacting with a course on their
computer. These tables are only available as per-course exports. They
do not exist in the database, but are computed when we export.  We
will add more table groups as we go along. 
<p>
Other tables of interests are <b>Demographics</b>, which provides
basic, anonymized info about each participant, and <b>EdxForum</b> the
Forum posts, upvotes, downvotes for all courses.

We describe the tables now,
group by group.

<h3>Basic Export Tables</h3>

The first of the basic export tables is the main table, which contains
all the events: <i>EventXtract</i>. NOTE: the <i>event_type</i> field
is the key to interpreting the remaining columns. Please see the 
<a href="http://edx.readthedocs.org/en/latest/">OpenEdx
Tracking Log documentation</a> of the original JSON formatted
fields. Those descriptions are authoritative.
<p>
<style type="text/css">
.tg  {margin-left: auto; margin-right: auto}
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 8px;border-style:solid;border-width:1px;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th colspan="2" class="tg-s6z2">EventXtract</th>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Anonymized participant identifier</td>
  </tr>
  <tr>
    <td class="tg-031e">event_type</td>
    <td class="tg-031e">Type of action the participant took
                        See <a href="http://edx.readthedocs.org/en/latest/">OpenEdx
                        Tracking Log documentation</a>
  </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">ip (<it>withheld from exports)</it></td>
    <td class="tg-031e">Participant's IP address while performing the action</td>
  </tr>
  <tr>
    <td class="tg-031e">time</td>
    <td class="tg-031e">Date and time when action was taken</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">course_display_name</td>
    <td class="tg-031e">Name of course for which action was taken</td>
  </tr>
  <tr>
    <td class="tg-031e">resource_display_name</td>
    <td class="tg-031e">Name of video or assignment associated with the action </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">success</td>
    <td class="tg-031e">Whether the participant succeeded, or not (context dependent)</td>
  </tr>
  <tr>
    <td class="tg-031e">video_code</td>
    <td class="tg-031e">Machine name of video, (video actions only)<br>
                        For YouTube videos this column allows you<br>
                        to find the video itself. For example,<br>
                        if this column contains '6Tnr8OL-9So' <br>
                        you can google that code, and will find<br>
                        the video.
    </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_current_time</td>
    <td class="tg-031e">Video player's current playhead time</td>
  </tr>
  <tr>
    <td class="tg-031e">video_speed</td>
    <td class="tg-031e">Video player's current speed</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_old_time</td>
    <td class="tg-031e">For video_seek action: original playhead time</td>
  </tr>
  <tr>
    <td class="tg-031e">video_new_time</td>
    <td class="tg-031e">For video_seek action: new playhead time</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_seek_type</td>
    <td class="tg-031e">Control used for a video seek action</td>
  </tr>
  <tr>
    <td class="tg-031e">video_new_speed</td>
    <td class="tg-031e">For video speed change action: new speed</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_old_speed</td>
    <td class="tg-031e">For video speed change action: original speed</td>
  </tr>
  <tr>
    <td class="tg-031e">goto_from</td>
    <td class="tg-031e">Teaching sequence change: origin</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">goto_dest</td>
    <td class="tg-031e">Teaching sequence change: destination</td>
  </tr>
</table>
<p>

Here are a couple of example rows, with most of the video related
columns skipped. Those are more easily accessed using the
VideoInteraction table (see below):<br>

<b>EventXtract Example Rows:</b><br>
<pre>
+------------------------------------------+---------------+----------------+---------------------+---------------------------------------------+-----------------------+---------+------------+-|
| anon_screen_name | event_type    | ip             | time                | course_display_name   | resource_display_name | success | video_code |... more video cols... | goto_from | goto_dest |
+------------------------------------------+---------------+----------------+---------------------+---------------------------------------------+-----------------------+---------+------------+--
| 3fc...           | book          | 171.64.197.42  | 2013-11-10 06:43:10 | Engineering/EE264/DSP |                       |         |            |                       |           |           |
| 6e9...           | problem_check | 222.228.217.74 | 2013-11-10 06:43:10 | Engineering/Solar/2013| I-V curve             |         |            |                       |           |           |
+------------------------------------------+---------------+----------------+---------------------+---------------------------------------------+-----------------------+---------+------------+--
</pre>
<p>
<!--
EventXtract AS
   SELECT anon_screen_name,
	  event_type,
	  ip,
	  time,
	  course_display_name,
	  resource_display_name,
	  success,
	  video_code,
	  video_current_time,
	  video_speed,
	  video_old_time,
	  video_new_time,
	  video_seek_type,
	  video_new_speed,
	  video_old_speed,
	  goto_from,
	  goto_dest
  FROM Edx.EdxTrackEvent
-->

If your focus is video behavior analysis, then the VideoInteraction
table is the easiest to use. It just extracts the video events from
the EventXtract table; the video related information is the same in
both tables.
<p>
Note that participants can download videos, and subsequently use their
own, local player. The platform software will not 'see' such local
activities, so this table can underestimate video activity frequency.
<p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 8px;border-style:solid;border-width:1px;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th colspan="2" class="tg-s6z2">VideoInteraction</th>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">event_type</td>
    <td class="tg-031e">Type of video action the participant took</td>
  </tr>
  <tr>
    <td class="tg-031e">resource_display_name</td>
    <td class="tg-031e">Name of video</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_current_time</td>
    <td class="tg-031e">Video player's current playhead time</td>
  </tr>
  <tr>
    <td class="tg-031e">video_speed</td>
    <td class="tg-031e">Video player's current speed</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_new_speed</td>
    <td class="tg-031e">For video speed change: new speed</td>
  </tr>
  <tr>
    <td class="tg-031e">video_old_speed</td>
    <td class="tg-031e">For video speed change: old speed</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_new_time</td>
    <td class="tg-031e">For video seek: new playhead time</td>
  </tr>
  <tr>
    <td class="tg-031e">video_old_time</td>
    <td class="tg-031e">For video seek: old playhead time</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">video_seek_type</td>
    <td class="tg-031e">Video control used for seek</td>
  </tr>
  <tr>
    <td class="tg-031e">video_code</td>
    <td class="tg-031e">Machine code name for video.<br>
                        For YouTube videos this column allows you<br>
                        to find the video itself. For example,<br>
                        if this column contains '6Tnr8OL-9So' <br>
                        you can google that code, and will find<br>
                        the video.
  </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">time</td>
    <td class="tg-031e">Time the video action was taken</td>
  </tr>
  <tr>
    <td class="tg-031e">course</td>
    <td class="tg-031e">For video speed change action: new speed</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">course_display_name</td>
    <td class="tg-031e">Name of course for which action was taken</td>
  </tr>
  <tr>
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Teaching sequence change: destination</td>
  </tr>
  <tr>
    <td class="tg-031e">video_id</td>
    <td class="tg-031e">a unique OpenEdX id for this video</td>
  </tr>
</table>
<p>
Here again some example rows:<br>

<b>VideoInteraction Example Rows:</b><br>
<pre>
+------------------------------------------+---------------+----------------+---------------------+---------------------------------------------+-----------------------+---------+------------+----------------------------------------------|
| event_type  | resource_display_name | video_current_time |
video_speed | video_new_speed | video_old_speed | video_new_time |
video_old_time | video_seek_type | video_code  | time                |
course_display_name | anon_screen_name | video_id
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| play_video  | Video 7.3.2: Hydrogen | 1244.047           | None        |                 |                 |                |                |                 | ZO0_R5VAoG4 | 2013-11-10 06:43:12 | Eng/EE-222/ME_I     | ef04...          |
| pause_video | Video 7.3.2: Hydrogen | 1217.389976        | None        |                 |                 |                |                |                 | ZO0_R5VAoG4 | 2013-11-10 06:43:42 | Eng/EE-222/ME_I     | 84fa...          |
| play_video  | Video 7.2.2: Oxygen   | 101.046621         | None        |                 |                 |                |                |                 | 6Tnr8OL-9So | 2013-11-10 06:43:43 | Eng/EE-222/ME_I     | 8998...          |
+-------------+------------------------------------------------+--------------------+-------------+-----------------+-----------------+----------------+----------------+-----------------+-------------+---------------------+----------------
</pre>
<p>

<!--
CREATE VIEW VideoInteraction AS
SELECT event_type,
       resource_display_name,
       video_current_time,
       video_speed,
       video_new_speed,
       video_old_speed,
       video_new_time,
       video_old_time,
       video_seek_type,
       video_code,
       time,
       course_display_name,
       anon_screen_name
FROM Edx.EdxTrackEvent
WHERE  CHAR_LENGTH(video_code) > 0 OR
       CHAR_LENGTH(video_current_time) > 0 OR
       CHAR_LENGTH(video_speed) > 0 OR
       CHAR_LENGTH(video_old_time) > 0 OR
       CHAR_LENGTH(video_new_time) > 0 OR
       CHAR_LENGTH(video_seek_type) > 0 OR
       CHAR_LENGTH(video_new_speed) > 0 OR
       CHAR_LENGTH(video_old_speed) > 0
-->
<p>
The <b>ActivityGrade</b> table holds events that concern homework
assignments. Each row in the table is one solution submission, or
inspection of one assignment by one participant. The rows inform whether
the solution was correct, in some parts, or in its entirety. If only
parts were correct, the table shows which parts, and which incorrect
answers the participant provided.
<p>
<b>Note:</b>the ActivityGrade table is not constructed from EdX track
event logs. Instead, this table is a composited from information in
the platform table courseware_studentmodule. In particular the
infamous JSON encoded <i>state</i> field in that table is parsed and
its JSON values are made accessible as columns in ActivityGrade.
<p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 8px;border-style:solid;border-width:1px;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th colspan="2" class="tg-s6z2">ActivityGrade</th>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">activity_grade_id</td>
    <td class="tg-031e">A unique identifier for this row</td>
  </tr>
  <tr>
    <td class="tg-031e">student_id</td>
    <td class="tg-031e">A numeric identifier used for participants in various other platform tables.</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">course_display_name</td>
    <td class="tg-031e">Name of course for which assignment was created</td>
  </tr>
  <tr>
    <td class="tg-031e">grade</td>
    <td class="tg-031e">The grade the participant received for this
                        assignment.<br>
                        <img src="figs/expert.png" width="2%"> This
                        quantity originates from a JOIN between
                        auth_user and certificates_generatedcertificate.
  </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">max_grade</td>
    <td class="tg-031e">The maximum grade possible for this assignment</td>
  </tr>
  <tr>
    <td class="tg-031e">percent_grade</td>
    <td class="tg-031e">Percentage of grade from max_grade</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">parts_correctness</td>
    <td class="tg-031e">Series of plus and minus chars indicating which problem parts were answered correctly</td>
  </tr>
  <tr>
    <td class="tg-031e">wrong_answers</td>
    <td class="tg-031e">If any assignment parts were answered incorrectly: the wrong answers</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">num_attempts</td>
    <td class="tg-031e">Total number of participant's attempts at this<br>
                       assignment at the time the event is
                       received. <br>
                       Note: each attempt generates an event, <br>
                       only the last attempt has the correct number. <br>
                       The number -1 stands for 'not applicable.' 
  </td>
  </tr>
  <tr>
    <td class="tg-031e">first_submit</td>
    <td class="tg-031e">Date and time the participant first submitted the assignment solution</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">last_submit</td>
    <td class="tg-031e">Most recent date and time the participant submitted the assignment solution</td>
  </tr>
  <tr>
    <td class="tg-031e">module_type</td>
    <td class="tg-031e">The teaching module type</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">resource_display_name</td>
    <td class="tg-031e">Assignment name</td>
  </tr>
  <tr>
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Participant's anonymized name</td>
  </tr>
</table>
</pre>
<p>
<b>ActivityGrade Example Rows:</b><br>
<p>
<pre>
+------------------------------------------+---------------+----------------+---------------------+---------------------------------------------+-----------------------+---------+------------+------|
| course_display_name | grade | max_grade | percent_grade | parts_correctness | wrong_answers     | numAttempts | first_submit | last_submit | module_type | resource_display_name | anon_screen_name |
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|Medicine/101/Stats   |     2 |         2 |           100 | ++                |                   |           2 | 2013-05-13 12:42:40 | 2013-05-13 12:50:52 | problem     | Quiz   | 55e90...         |
|Medicine/101/Stats   |     0 |         2 |             0 | --                | choice_0,choice_4 |           1 | 2013-05-13 13:23:57 | 2013-05-13 13:32:33 | problem     | Quiz   | 95d8b...         |
+-------------+------------------------------------------------+--------------------+-------------+-----------------+-----------------+----------------+----------------+-----------------+------------
</pre>

The <b>Demographics</b> view contains anonymized demographic data
on participants.
<p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 8px;border-style:solid;border-width:1px;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th colspan="2" class="tg-s6z2">Demographics</th>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Participant's anonymized name</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">gender</td>
    <td class="tg-031e">Single letter: 'm' or 'f'. Blank if not provided.</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">year_of_birth</td>
    <td class="tg-031e">Year of participant's birth, if
    provided. Else NULL</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">curr_age</td>
    <td class="tg-031e">Current age, computed on the fly from the year
       when the row producing SELECT is issued, and year_of_birth.</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">level_of_education</td>
    <td class="tg-031e">One of: Doctorate, Masters or professional
                        degree, Bachelors, Associates, Secondary/High
                        School, Junior secondary/junior high/middle
                        School, Elementary/Primary School, None,
                        Other, User withheld, Signup before level
                        collected.</td> 
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">country_three_letters</td>
    <td class="tg-031e">Official three-letter code of country. If
                        participant interacted with a course from 
                        multiple Internet addresses, Demographics
                        will contain one entry for each distinct
                        address, even if the countries are the same.
  </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">country_name</td>
    <td class="tg-031e">Full name of country. See
                        country_three_letters for explanation of 
                        multiple entries.
  </td>
  </tr>
</table>
</pre>
</div>
<p>
If participant interacted with a course from multiple Internet
addresses, Demographics will contain one entry for each distinct
address, even if the address' countries are the same. It is therefore
wise to use DISTINCT when querying:

<pre>
mysql> SELECT DISTINCT Demographics.*, FinalGrade.grade  
       FROM Demographics, FinalGrade 
       WHERE Demographics.anon_screen_name = FinalGrade.anon_screen_name  
        AND  FinalGrade.course_id = 'Engineering/Solar/Fall2013' 
       LIMIT 4;
+------------------------------------------+--------+---------------+----------+--------------------+-----------------------+---------------+-------+
| anon_screen_name                         | gender | year_of_birth | curr_age | level_of_education | country_three_letters | country_name  | grade |
+------------------------------------------+--------+---------------+----------+--------------------+-----------------------+---------------+-------+
| 18070a6cbf7c75ea6b6a53cf08d875e50a4dc1fb | m      |          1989 |       25 | User withheld      | BGR                   | Bulgaria      |     0 |
| f42a592a30690dc43bdd3d0ece1019c79b88c8ac | m      |          1987 |       27 | Bachelors          | USA                   | United States |     0 |
| 20bd8681086b0ddb994e1fec2d0de110f55bc1da | m      |          1990 |       24 | Bachelors          | USA                   | United States |     0 |
| 610467062fa05ff271198cfcc689febe856f48e7 |        |          NULL |     NULL | User withheld      | FRA                   | France        |     0 |
+------------------------------------------+--------+---------------+----------+--------------------+-----------------------+---------------+-------+
</pre>


<p>
All <b>Forum post</b> entries are scrubbed of personally identifiable
information. The following are redacted: phone numbers, zip codes,
email addresses, and the poster's name. In each case the type of
redacted information can be determined by the redaction text. For
example, you will see &lt;emailRedac&gt;, &lt;zipRedac&gt;. For poster
names you will see &lt;nameRedac_anon_screen_name_redacted&gt;. These
replacements keep word count intact. Unfortunately, international zip
codes are varied enough that detecting them results in many false
positives. Some non-zip numeric information is therefore redacted for
no good reason.
<p>
Here is a complication stemming from privacy protection: you will find
the anon_screen_name column filled with the single value
'anon_screen_name_redacted'. You can therefore not use this column to
select by participant as you do on all the other tables. Instead, when
selecting from the EdxForum.contents table, you need to use
column <i>user_int_id</i>.
<p>
This approach works fine while working within the Forum table
only. But the setup prevents you from relating Forum posts to other
tables to find correlations between Forum posting and, say, grade
outcomes.
<p>
The reason for this separation is a known attack onto the privacy in
the non-Forum tables when the same participant code is used in both
worlds. We call the fully redacted Forum table <i>non-relatable</i>.
<p>
To explore correlations you need a translation from
the <i>user_int_id</i> in the Forum table to
the <i>anon_screen_name</i> used in all other tables. To receive that
translation, please fill out the form at
http://vpol.stanford.edu/research. If you have access to the data at
all, you filled this form out before. This time, please make very
clear in the free-form text field that you already have access to the
data, and that you just need the additional Forum translation
information.
<p>
Each Forum post is contained in one row:
<p>
<div align="center">
<style>
    .data-table {
        border-collapse: collapse;
    }
    .border-top {
        border-top: 1px solid #000;
    }
    .border-bottom {
        border-bottom: 1px solid #000;
    }
    .border-left {
        border-left: 1px solid #000;
    }
    .border-right {
        border-right: 1px solid #000;
    }
</style>


<table class="data-table">
    <tr>
        <th colspan="2" class="border-top border-bottom border-left border-right">OpenEdX Forum Table</th>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">anon_screen_name</td>
        <td class="border-bottom border-right">anonymized participant ID (redacted unless table is relatable)</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">type</td>
        <td class="border-bottom border-right">type of post: currently Comment or CommentThread</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">anonymous</td>
        <td class="border-bottom border-right">whether post was submitted anonymously</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">anonymous_to_peers</td>
        <td class="border-bottom border-right">anonymous to peers</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">at_position_list</td>
        <td class="border-bottom border-right">apparently unused</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">user_int_id</td>
        <td class="border-bottom border-right">anonymized user ID; different from anon_screen_name</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">body</td>
        <td class="border-bottom border-right">anonymized body of the post. Redacted: emails, phone numbers, zip codes, name of poster</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">course_display_name</td>
        <td class="border-bottom border-right">name of course with which the entry is associated</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">created_at</td>
        <td class="border-bottom border-right">date of creation</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">votes</td>
        <td class="border-bottom border-right">original JSON that summarizes votes. It is recommended to instead use the broken out columns below</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">count</td>
        <td class="border-bottom border-right">total number of votes: up or down</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">down_count</td>
        <td class="border-bottom border-right">number of down votes</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">up_count</td>
        <td class="border-bottom border-right">number of up votes</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">up</td>
        <td class="border-bottom border-right">list of individual up votes</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">down</td>
        <td class="border-bottom border-right">list of individual down votes</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">comment_thread_id</td>
        <td class="border-bottom border-right">ID of thread</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">parent_id</td>
        <td class="border-bottom border-right">ID of parent</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">parent_ids</td>
        <td class="border-bottom border-right">list of parent IDs</td>
    </tr>
    <tr>
        <td class="border-bottom border-left border-right">sk</td>
        <td class="border-bottom border-right">another, not understood key</td>
    </tr>
</table>
</div>

<p>
<b>EdxForum Example Rows:</b><br>

<pre>
+---------------------------+---------------+-----------+--------------------+-------------+---------------------------------------------------------------------------------------+------------------------------
| anon_screen_name          | type          | anonymous | anonymous_to_peers | user_int_id | body                   | course_display_name  | created_at          |... | count | down_count | up_count | up        |...
+---------------------------+---------------+-----------+--------------------+-------------+-------------------------------------------------------------------------------------------------------------+--------
| anon_screen_name_redacted | CommentThread | False     | False              |       40009 | If R is optional ...?  | Medicine/HRP258/...  | 2013-06-11 16:59:30 |... |     1 |          0 |        1 | ['28005'] |...
| anon_screen_name_redacted | Comment       | False     | False              |       28461 | Call me: &lt;phoneRedact&gt; | Medicine/HRP258/...  | 2013-06-11 17:39:24 |... |     0 |          0 |        0 | []        |...
| anon_screen_name_redacted | Comment       | False     | False              |       28461 | I'm &lt;nameRedact&gt;...    | Medicine/HRP258/...  | 2013-06-11 17:39:45 |... |     0 |          0 |        0 | []        |...
+---------------------------+---------------+-----------+--------------------+-------------+---------------------------------------------------------------------------------------+------------------------------
</pre>



<h3>Engagement Export Tables</h3>

The first table in this group is usually large, because it lists
each <i>session</i> of each participant in a class. As session is
defined as a series of actions a participant undertook on the computer
while interacting with the course such that:
<ol>
  <li>The actions were detectable by the platform software, i.e. the
      actions triggered a logging event.</li>
  <li>No two actions were more than 30 minutes apart.</li>
</ol>
When more than 30 minutes elapse between two events, the second event
is considered part of a subsequent session. Since the last event's
duration is not delimited by a follow-on action in the same session,
the last event is counted as 5 minutes. Session length, and estimated
durations of the last event in a session can be adjusted in the
engagement computation program.
<p>
Note that this accounting of time engagement is quite approximate, for
example because participants might have been reading course related
materials for an hour without generating a platform event. No event:
no accounting for that time.
<p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg .tg-s6z2{text-align:center
</style>
<table class="tg">
  <tr>
    <th class="tg-s6z2" colspan="2">Engagement_AllData</th>
  </tr>
  <tr>
    <td class="tg-031e">Platform</td>
    <td class="tg-031e">Platform where course ran<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Course</td>
    <td class="tg-031e">Name of course<br></td>
  </tr>
  <tr>
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Hashed name of participant<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Date</td>
    <td class="tg-031e">Date when the row's participant session occurred<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Time</td>
    <td class="tg-031e">Time when the row's participant session started<br></td>
  </tr>
  <tr>
    <td class="tg-031e">SessionLength (min)</td>
    <td class="tg-031e">Length of session in minutes</td>
  </tr>
</table>
<p>
A few example lines from an engagement_allData table:
<center><img src="figs/engagement_alldata.png"/></center>
<p>

The engagement_weeklyEffort table lists the sum of session lengths for
each participant for each week.
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th class="tg-s6z2" colspan="2">Engagement_weeklyEffort</th>
  </tr>
  <tr>
    <td class="tg-031e">Platform</td>
    <td class="tg-031e">Platform where course ran<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Course</td>
    <td class="tg-031e">Name of course<br></td>
  </tr>
  <tr>
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Hashed name of participant<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Week</td>
    <td class="tg-031e">Running week of the course<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Effort (min)<br></td>
    <td class="tg-031e">Number of minutes expended by the row's participant during the row's week<br></td>
  </tr>
</table>
<p>
A typical row in engagement_weeklyEffort looks like this:
<center><img src="figs/engagement_weeklyEffort.png"/></center>

<p>
The final table in the engagement group is a single row for each
course. The row summarizes the efforts across all weeks in one
course. If a single course is being exported, then the table will
contain only one line. 
<p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th class="tg-s6z2" colspan="2">Engagement_summary</th>
  </tr>
  <tr>
    <td class="tg-031e">Platform</td>
    <td class="tg-031e">Platform where course ran<br></td>
  </tr>
  <tr>
    <td class="tg-031e">Course</td>
    <td class="tg-031e">Name of course<br></td>
  </tr>
  <tr>
    <td class="tg-031e">TotalStudentSessions</td>
    <td class="tg-031e">Total number of sessions by all participants in the course<br></td>
  </tr>
  <tr>
    <td class="tg-031e">TotalEffortAllStudents<br></td>
    <td class="tg-031e">Sum of minutes from all participants' sessions in the course<br></td>
  </tr>
  <tr>
    <td class="tg-031e">MedPerWeekOneToTwenty</td>
    <td class="tg-031e">The number of weeks in which a median of 1 to 20 minutes of time engagement,was observed, counting each participant, each week.</td>
  </tr>
  <tr>
    <td class="tg-031e">MedPerWeekTwentyoneToSixty</td>
    <td class="tg-031e">The number of weeks in which a median of 21min to 1hr of time engagement,was observed, counting each participant, each week.</td>
  </tr>
  <tr>
    <td class="tg-031e">MedPerWeekGreaterSixty</td>
    <td class="tg-031e">Median weekly number of sessions lasting longer than one hour, averaged over all weeks<br></td>
  </tr>
</table>
<p>
A typical row in engagement_summary looks like this:
<center><img src="figs/engagement_summary.png"/></center>

<p>
<hr>
<p>
The following tables are only available.
by <a href="#accessProcedure">special arrangement</a>

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 8px;border-style:solid;border-width:1px;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;}
.tg .tg-s6z2{text-align:center}
</style>
<table class="tg">
  <tr>
    <th colspan="2" class="tg-s6z2">UserGrade</th>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">name</td>
    <td class="tg-031e">Participant's self reported name</td>
  </tr>
  <tr>
    <td class="tg-031e">screen_name</td>
    <td class="tg-031e">Participant's choice of name for him/herself on the online learning platform</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">grade</td>
    <td class="tg-031e">Currently known
      grade.<br> (<img src="figs/expert.png" width="2%">
                        The information comes
                        from platform tables auth_user and
                        certificates_generatedcertificate.)
    </td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">course_id</td>
    <td class="tg-031e">Name of course in format foo/bar/fum</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">distinction</td>
    <td class="tg-031e">0 or 1</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">status</td>
    <td class="tg-031e">downloadable, generating, notpassing, or unavailable</td>
  </tr>
  <tr class="tg-even">
    <td class="tg-031e">user_int_id</td>
    <td class="tg-031e">Integer identifier for participant as used in
                        platform native
                        tables.<br> (<img src="figs/expert.png"
                        width="2%">This is the same value as the
                        student_id column in courseware_studentmodule.)
   </td> 
  </tr>
  <tr>
    <td class="tg-031e">anon_screen_name</td>
    <td class="tg-031e">Anonymization code used for this
                        participant. Since this table contains both<br>
                        the integer ID used on platform tables, and<br>
                        the 40 byte id used elsewhere on datastage,<br>
                        this table is used for translation. See<br>
                        stored functions idInt2Anon() and
                        idAnon2Int().)
    </td>
  </tr>
</table>
<p>

<h3 id="mirrors">Platform tables mirrored on Datastage</h3> 

This list may change. To add additional tables, see 
script json_to_relation/scripts/cronRefreshEdxprod.sh.
<ul>
<li>auth_user</li>
<li>auth_userprofile</li>
<li>certificates_generatedcertificate</li>
<li>courseware_studentmodule</li>
<li>courseware_studentmodulehistory</li>
<li>external_auth_externalauthmap</li>
<li>student_anonymoususerid</li>
</ul>
<p>
<h3>Useful MySQL Functions</h3>

If you query the database directly, the following functions might
prove useful:
<ul>
  <li><b>earliestLog()</b>: the earliest OpenEdx event log load date/time</li>
  <li><b>latestLog()</b>: the most recent OpenEdx event log load date/time</li>
  <li><b>idAnon2Int()</b>: convert from hash values used in
        anon_screen_name columns to integers used in other platform tables</li>
  <li><b>idInt2Anon()</b>: convert from integers used in other platform
        tables to hash values used in anon_screen_name columns</li> 
  <li><b>idAnon2Ext()</b>: convert from Datastage's 40 byte
        participant ID to the id used by Piazza and Qualtrix.</li>
</ul>
The functions are used within SELECT statements, like: SELECT earliestLog();


<h2 id="appC">Appendix C: How to Set up an SSH Tunnel</h2>
An ssh tunnel is a connection between two computers that encrypts the
information it carries. Sometimes a server machine is running a
service that client applications on another machine can connect
to. For example, Excel connecting directly to a MySQL database is such
an example. Similarly, Froq and RazorSQL, the graphical querying tools
mentioned earlier, might connect directly from your computer to the
MySQL database that runs on the datastage.stanford.edu machine.

This style of direct connection has your password go over the Internet
unencrypted when you log into the database. This vulnerability to wire
tapping is a disadvantage of direct connections. On the other hand,
setting up a direct connection is relatively easy, and client side
applications, the programs you use on your computer to connect to the
database, know how to construct a direct connection.

To protect data more securely, a <i>tunnel</i> may first be
constructed between your computer and the database server
computer. Your commands to the database then first travel encrypted to
the server computer through the tunnel. Once they arrive, the commands
are handled as if they had been issued on the server computer itself
in the first place.

</p><center><img src="figs/sshTunnelIllustrationWeb.png"></center></br>

To set up a tunnel between your computer and datastage.stanford.edu,
you type the command at the bottom of the illustration into a terminal
window <b>before</b> you ask your data access application to try and
get to the data. The command says: set up a secure connection
(<i>ssh</i>) to machine <i>datastage.stanford.edu</i>; to applications
on my own computer the connection is to look like a database to which
I write via my out-port <i>5556</i>. The connection should function
Like a tunnel (<i>-L</i>). On the database on the other end, the
commands I send should look like they were issued on <b>its</b>
machine (<i>localhost</i> from the database's point of view), and were
issued directly into the in-port where the database normally listens
to (<i>3306</i>), as it does in the direct connection case. 

The <i>-f -N</i> just make it so that you can keep using the terminal
window you used to type in the command.

Important point: in order to get into that in-port 22 in the figure,
you will need a password; the same password you would need to log into
that machine. In order to get through the in-port 3306 into the
database within the server, you will need a second password, the one
that authenticates you to the database. You would need that one in the
direct connection as well, unless the database maintainer has not set
a password for you.


<html>
<head>
</head>
<body>
